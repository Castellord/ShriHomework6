"use strict";var PTSans=new FontFace("PT Sans","url(./fonts/PTS75F_W.woff)"),PTSansNarrow=new FontFace("PT Sans Narrow","url(./fonts/PTN77F_W.woff)");document.fonts.add(PTSans),document.fonts.add(PTSansNarrow),PTSans.load(),PTSansNarrow.load(),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".modal__value");document.querySelector(".adjust-bar.adjust-bar_theme_temp").oninput=function(){e.innerHTML=0<this.value?"+"+this.value:this.value};var t=document.querySelector(".devices__paginator .paginator__arrow_left"),o=document.querySelector(".devices__paginator .paginator__arrow_right"),n=document.querySelectorAll(".devices__panel").length,r=document.querySelector(".devices"),c=document.querySelector(".devices__paginator"),a=1;c.classList.toggle("paginator_hide",n<7),o.addEventListener("click",function(){a+=1,t.classList.toggle("paginator__arrow_disabled",1===a),r.scroll({top:0,left:1366,behavior:"smooth"})}),t.addEventListener("click",function(){1<a&&(a-=1,t.classList.toggle("paginator__arrow_disabled",1===a),r.scroll({top:0,left:-1366,behavior:"smooth"}))});var l=void 0,i=void 0,u=.42,s=-.42,d=265,_=function(e){return Math.floor(Math.abs(360*e*1.73+d)/53+26)};function m(e){u<e?e=u:e<s&&(e=s),l=_(i=e),document.querySelector(".modal_knob .modal__value").innerHTML="+"+l,document.querySelector(".knob__value").innerHTML="+"+l,document.querySelector(".knob__indicator").style.strokeDasharray=360*i*1.73+d+" 629",document.querySelector(".knob__arrow").style.transform="rotate("+360*i+"deg)"}function f(e,t){var o,n=[(o=t.getBoundingClientRect()).left+(o.right-o.left)/2,o.top+(o.bottom-o.top)/2],r=[e.clientX,e.clientY],c=void 0;return e.targetTouches&&e.targetTouches[0]&&(r=[e.targetTouches[0].clientX,e.targetTouches[0].clientY]),c=Math.atan2(r[1]-n[1],r[0]-n[0]),c+=Math.PI/2}var g,p=void 0,h=null,v=null;function S(e){e.preventDefault(),e.stopPropagation();var t=f(e,document.querySelector(".knob_center"));p=!0,h=t,v=i}function y(e){p=!1}function q(e){if(p){var t=h,o=f(e,document.querySelector(".knob_center")),n=o-t;h=o,n<0&&(n+=2*Math.PI),n>Math.PI&&(n-=2*Math.PI);var r=n/Math.PI/2,c=v+r;m(v=c)}}(g=document.querySelector(".knob-container")).addEventListener("mousedown",S),document.addEventListener("mouseup",y),document.addEventListener("mousemove",q),g.addEventListener("touchstart",S),document.addEventListener("touchend",y),document.addEventListener("touchmove",q),m(0),document.querySelectorAll(".modal_close").forEach(function(e){e.onclick=function(){document.querySelectorAll(".modal").forEach(function(e){e.classList.toggle("modal_open",!1),document.querySelector("body").style.overflow="auto"})}});var L={manual:-10,cold:0,warm:23,hot:30};document.querySelectorAll(".modal__filter-item_temp").forEach(function(e){e.onclick=function(){document.querySelector(".adjust-bar_theme_temp").value=L[this.id],document.querySelector(".modal_temp .modal__value").innerHTML=0<L[this.id]?"+"+L[this.id]:L[this.id]}});var b=function(e){document.querySelector(e).classList.toggle("modal_open",!0),document.querySelector("body").style.overflow="hidden"};document.querySelectorAll(".panel_temp").forEach(function(e){e.onclick=function(){b(".modal_temp")}}),document.querySelectorAll(".panel_lamp").forEach(function(e){e.onclick=function(){b(".modal_light")}}),document.querySelectorAll(".panel_floor").forEach(function(e){e.onclick=function(){b(".modal_knob")}});var k=document.querySelector(".scenarios__paginator .paginator__arrow_left"),w=document.querySelector(".scenarios__paginator .paginator__arrow_right"),E=document.querySelectorAll(".scenarios__panel").length,T=document.querySelectorAll(".scenarios__page").length,P=document.querySelector(".scenarios"),M=document.querySelector(".scenarios__paginator"),A=1;M.classList.toggle("paginator_hide",E<=9),w.addEventListener("click",function(){A<T&&(A+=1,w.classList.toggle("paginator__arrow_disabled",A===T),k.classList.toggle("paginator__arrow_disabled",1===A),P.scroll({top:0,left:645,behavior:"smooth"}))}),k.addEventListener("click",function(){1<A&&(A-=1,w.classList.toggle("paginator__arrow_disabled",A===T),k.classList.toggle("paginator__arrow_disabled",1===A),P.scroll({top:0,left:-645,behavior:"smooth"}))});var F=document.querySelector(".filter__select-button"),I=document.querySelector(".filter__select-button .button__text"),N=document.querySelectorAll(".filter__select-item"),H=document.querySelector(".filter__select-popup");F.addEventListener("click",function(){H.classList.toggle("filter__select-popup_open")}),N.forEach(function(e){e.addEventListener("click",function(e){document.querySelector("#"+e.target.dataset.group).checked=!0,N.forEach(function(e){return e.classList.toggle("filter__select-item_checked",!1)}),e.target.classList.toggle("filter__select-item_checked",!0),H.classList.toggle("filter__select-popup_open",!1),I.innerText=e.target.innerText})}),document.querySelector(".menu__icon").addEventListener("click",function(){document.querySelector(".menu").classList.toggle("menu_open")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvbnRzLmpzIiwic2NyaXB0cy5qcyJdLCJuYW1lcyI6WyJQVFNhbnMiLCJGb250RmFjZSIsIlBUU2Fuc05hcnJvdyIsImRvY3VtZW50IiwiZm9udHMiLCJhZGQiLCJsb2FkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm91dHB1dCIsInF1ZXJ5U2VsZWN0b3IiLCJvbmlucHV0IiwiaW5uZXJIVE1MIiwidGhpcyIsInZhbHVlIiwiYXJyb3dMZWZ0RGV2cyIsImFycm93UmlnaHREZXZzIiwicGFuZWxDb3VudERldnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGVuZ3RoIiwiZGV2aWNlcyIsInBhZ2lhbnRvckRldnMiLCJjdXJyZW50UGFnZURldnMiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJzY3JvbGwiLCJ0b3AiLCJsZWZ0IiwiYmVoYXZpb3IiLCJjdXJWYWx1ZSIsImN1clJvdGF0ZSIsIm1heFJvdGF0ZSIsIm1pblJvdGF0ZSIsIklORElDQVRPUl9PRkZTRVQiLCJyb3RhdGVUb1ZhbHVlIiwicm90YXRlIiwiTWF0aCIsImZsb29yIiwiYWJzIiwic2V0Um90YXRlIiwic3R5bGUiLCJzdHJva2VEYXNoYXJyYXkiLCJ0cmFuc2Zvcm0iLCJnZXRNb3VzZUFuZ2xlIiwiZXZlbnQiLCJjZW50ZXJFbGVtIiwicmVjdCIsInBvcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInJpZ2h0IiwiYm90dG9tIiwiY3Vyc29yIiwiY2xpZW50WCIsImNsaWVudFkiLCJyYWQiLCJ0YXJnZXRUb3VjaGVzIiwiYXRhbjIiLCJQSSIsImVsZW0iLCJrbm9iRHJhZ2dlZCIsInByZXZBbmdsZVJhZCIsInByZXZSb3RhdGUiLCJzdGFydERyYWdnaW5nIiwiZSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwic3RvcERyYWdnaW5nIiwiZHJhZ1JvdGF0ZSIsIm9sZCIsImRlbHRhIiwiZGVsdGFSb3RhdGUiLCJmb3JFYWNoIiwiYiIsIm9uY2xpY2siLCJtIiwib3ZlcmZsb3ciLCJURU1QUyIsIm1hbnVhbCIsImNvbGQiLCJ3YXJtIiwiaG90IiwibCIsImlkIiwic2hvd01vZGFsIiwic2VsZWN0b3IiLCJwIiwiYXJyb3dMZWZ0U2NlbnMiLCJhcnJvd1JpZ2h0U2NlbnMiLCJwYW5lbENvdW50U2NlbnMiLCJwYWdlQ291bnRTY2VucyIsInNjZW5hcmlvcyIsInBhZ2lhbnRvclNjZW5zIiwiY3VycmVudFBhZ2UiLCJzZWxlY3RCdXR0b24iLCJzZWxlY3RCdXR0b25UZXh0Iiwic2VsZWN0T3B0aW9ucyIsInBvcHVwIiwibyIsInRhcmdldCIsImRhdGFzZXQiLCJncm91cCIsImNoZWNrZWQiLCJvcHQiLCJpbm5lclRleHQiXSwibWFwcGluZ3MiOiJBQUFBLGFBRUEsSUFBQUEsT0FBQSxJQUFBQyxTQUFBLFVBQUEsOEJBQ0FDLGFBQUEsSUFBQUQsU0FBQSxpQkFBQSw4QkFFQUUsU0FBQUMsTUFBQUMsSUFBQUwsUUFDQUcsU0FBQUMsTUFBQUMsSUFBQUgsY0FFQUYsT0FBQU0sT0FDQUosYUFBQUksT0NQQUgsU0FBQUksaUJBQUEsbUJBQUEsV0FDQSxJQUFBQyxFQUFBTCxTQUFBTSxjQUFBLGlCQUNBTixTQUFBTSxjQUFBLHFDQUVBQyxRQUFBLFdBQ0FGLEVBQUFHLFVBQUEsRUFBQUMsS0FBQUMsTUFBQSxJQUFBRCxLQUFBQyxNQUFBRCxLQUFBQyxPQUdBLElBQUFDLEVBQUFYLFNBQUFNLGNBQUEsOENBQ0FNLEVBQUFaLFNBQUFNLGNBQUEsK0NBQ0FPLEVBQUFiLFNBQUFjLGlCQUFBLG1CQUFBQyxPQUNBQyxFQUFBaEIsU0FBQU0sY0FBQSxZQUNBVyxFQUFBakIsU0FBQU0sY0FBQSx1QkFDQVksRUFBQSxFQUVBRCxFQUFBRSxVQUFBQyxPQUFBLGlCQUFBUCxFQUFBLEdBRUFELEVBQUFSLGlCQUFBLFFBQUEsV0FDQWMsR0FBQSxFQUNBUCxFQUFBUSxVQUFBQyxPQUFBLDRCQUFBLElBQUFGLEdBQ0FGLEVBQUFLLE9BQUEsQ0FDQUMsSUFBQSxFQUNBQyxLQUFBLEtBQ0FDLFNBQUEsYUFJQWIsRUFB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QUEsUUFBQSxXQUNBLEVBQUFvRixJQUNBQSxHQUFBLEVBQ0FMLEVBQUFoRSxVQUFBQyxPQUFBLDRCQUFBb0UsSUFBQUgsR0FDQUgsRUFBQS9ELFVBQUFDLE9BQUEsNEJBQUEsSUFBQW9FLEdBQ0FGLEVBQUFqRSxPQUFBLENBQ0FDLElBQUEsRUFDQUMsTUFBQSxJQUNBQyxTQUFBLGNBS0EsSUFBQWlFLEVBQUF6RixTQUFBTSxjQUFBLDBCQUNBb0YsRUFBQTFGLFNBQUFNLGNBQUEsd0NBQ0FxRixFQUFBM0YsU0FBQWMsaUJBQUEsd0JBQ0E4RSxFQUFBNUYsU0FBQU0sY0FBQSx5QkFFQW1GLEVBQUFyRixpQkFBQSxRQUFBLFdBQ0F3RixFQUFBekUsVUFBQUMsT0FBQSwrQkFHQXVFLEVBQUF4QixRQUFBLFNBQUEwQixHQUNBQSxFQUFBekYsaUJBQUEsUUFBQSxTQUFBdUQsR0FDQTNELFNBQUFNLGNBQUEsSUFBQXFELEVBQUFtQyxPQUFBQyxRQUFBQyxPQUFBQyxTQUFBLEVBRUFOLEVBQUF4QixRQUFBLFNBQUErQixHQUNBLE9BQUFBLEVBQUEvRSxVQUFBQyxPQUFBLCtCQUFBLEtBRUF1QyxFQUFBbUMsT0FBQTNFLFVBQUFDLE9BQUEsK0JBQUEsR0FDQXdFLEVBQUF6RSxVQUFBQyxPQUFBLDZCQUFBLEdBQ0FzRSxFQUFBUyxVQUFBeEMsRUFBQW1DLE9BQUFLLGNBSUFuRyxTQUFBTSxjQUFBLGVBQUFGLGlCQUFBLFFBQUEsV0FDQUosU0FBQU0sY0FBQSxTQUFBYSxVQUFBQyxPQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxudmFyIFBUU2FucyA9IG5ldyBGb250RmFjZShcIlBUIFNhbnNcIiwgXCJ1cmwoLi9mb250cy9QVFM3NUZfVy53b2ZmKVwiKTtcbnZhciBQVFNhbnNOYXJyb3cgPSBuZXcgRm9udEZhY2UoXCJQVCBTYW5zIE5hcnJvd1wiLCBcInVybCguL2ZvbnRzL1BUTjc3Rl9XLndvZmYpXCIpO1xuXG5kb2N1bWVudC5mb250cy5hZGQoUFRTYW5zKTtcbmRvY3VtZW50LmZvbnRzLmFkZChQVFNhbnNOYXJyb3cpO1xuXG5QVFNhbnMubG9hZCgpO1xuUFRTYW5zTmFycm93LmxvYWQoKTsiLCJcInVzZSBzdHJpY3RcIjtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIG91dHB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ZhbHVlXCIpO1xuICB2YXIgcmFuZ2VTTGlkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkanVzdC1iYXIuYWRqdXN0LWJhcl90aGVtZV90ZW1wXCIpO1xuXG4gIHJhbmdlU0xpZGVyLm9uaW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgb3V0cHV0LmlubmVySFRNTCA9IHRoaXMudmFsdWUgPiAwID8gXCIrXCIgKyB0aGlzLnZhbHVlIDogdGhpcy52YWx1ZTtcbiAgfTtcblxuICB2YXIgYXJyb3dMZWZ0RGV2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGV2aWNlc19fcGFnaW5hdG9yIC5wYWdpbmF0b3JfX2Fycm93X2xlZnRcIik7XG4gIHZhciBhcnJvd1JpZ2h0RGV2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGV2aWNlc19fcGFnaW5hdG9yIC5wYWdpbmF0b3JfX2Fycm93X3JpZ2h0XCIpO1xuICB2YXIgcGFuZWxDb3VudERldnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmRldmljZXNfX3BhbmVsXCIpLmxlbmd0aDtcbiAgdmFyIGRldmljZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRldmljZXNcIik7XG4gIHZhciBwYWdpYW50b3JEZXZzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kZXZpY2VzX19wYWdpbmF0b3JcIik7XG4gIHZhciBjdXJyZW50UGFnZURldnMgPSAxO1xuXG4gIHBhZ2lhbnRvckRldnMuY2xhc3NMaXN0LnRvZ2dsZShcInBhZ2luYXRvcl9oaWRlXCIsIHBhbmVsQ291bnREZXZzIDwgNyk7XG5cbiAgYXJyb3dSaWdodERldnMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBjdXJyZW50UGFnZURldnMgKz0gMTtcbiAgICBhcnJvd0xlZnREZXZzLmNsYXNzTGlzdC50b2dnbGUoXCJwYWdpbmF0b3JfX2Fycm93X2Rpc2FibGVkXCIsIGN1cnJlbnRQYWdlRGV2cyA9PT0gMSk7XG4gICAgZGV2aWNlcy5zY3JvbGwoe1xuICAgICAgdG9wOiAwLFxuICAgICAgbGVmdDogMTM2NixcbiAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiXG4gICAgfSk7XG4gIH0pO1xuXG4gIGFycm93TGVmdERldnMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoY3VycmVudFBhZ2VEZXZzID4gMSkge1xuICAgICAgY3VycmVudFBhZ2VEZXZzIC09IDE7XG4gICAgICBhcnJvd0xlZnREZXZzLmNsYXNzTGlzdC50b2dnbGUoXCJwYWdpbmF0b3JfX2Fycm93X2Rpc2FibGVkXCIsIGN1cnJlbnRQYWdlRGV2cyA9PT0gMSk7XG4gICAgICBkZXZpY2VzLnNjcm9sbCh7XG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbGVmdDogLTEzNjYsXG4gICAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBjdXJWYWx1ZSA9IHZvaWQgMDtcbiAgdmFyIGN1clJvdGF0ZSA9IHZvaWQgMDtcbiAgdmFyIG1heFJvdGF0ZSA9IDAuNDI7IC8vIDE1MCDQs9GA0LDQtNGD0YHQvtCyXG4gIHZhciBtaW5Sb3RhdGUgPSAtMC40MjsgLy8gLTE1MCDQs9GA0LDQtNGD0YHQvtCyXG5cbiAgdmFyIE1JTl9WQUxVRSA9IDI2O1xuICB2YXIgTUFYX1ZBTFVFID0gMzU7XG4gIHZhciBJTkRJQ0FUT1JfT0ZGU0VUID0gMjY1O1xuXG4gIHZhciByb3RhdGVUb1ZhbHVlID0gZnVuY3Rpb24gcm90YXRlVG9WYWx1ZShyb3RhdGUpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLmFicyhyb3RhdGUgKiAzNjAgKiAxLjczICsgSU5ESUNBVE9SX09GRlNFVCkgLyA1MyArIE1JTl9WQUxVRSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSByb3RhdGUg0JrQvtC70LjRh9C10YHRgtCy0L4g0L7QsdC+0YDQvtGC0L7QsiDQvtGCINC90LXQudGC0YDQuNCw0LvRjNC90L7Qs9C+INC/0L7Qu9C+0LbQtdC90LjRjy5cbiAgICovXG4gIGZ1bmN0aW9uIHNldFJvdGF0ZShyb3RhdGUpIHtcbiAgICBpZiAocm90YXRlID4gbWF4Um90YXRlKSB7XG4gICAgICByb3RhdGUgPSBtYXhSb3RhdGU7XG4gICAgfSBlbHNlIGlmIChyb3RhdGUgPCBtaW5Sb3RhdGUpIHtcbiAgICAgIHJvdGF0ZSA9IG1pblJvdGF0ZTtcbiAgICB9XG5cbiAgICBjdXJSb3RhdGUgPSByb3RhdGU7XG4gICAgY3VyVmFsdWUgPSByb3RhdGVUb1ZhbHVlKHJvdGF0ZSk7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX2tub2IgLm1vZGFsX192YWx1ZVwiKS5pbm5lckhUTUwgPSBcIitcIiArIGN1clZhbHVlO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIua25vYl9fdmFsdWVcIikuaW5uZXJIVE1MID0gXCIrXCIgKyBjdXJWYWx1ZTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmtub2JfX2luZGljYXRvclwiKS5zdHlsZS5zdHJva2VEYXNoYXJyYXkgPSBjdXJSb3RhdGUgKiAzNjAgKiAxLjczICsgSU5ESUNBVE9SX09GRlNFVCArIFwiIDYyOVwiO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIua25vYl9fYXJyb3dcIikuc3R5bGUudHJhbnNmb3JtID0gXCJyb3RhdGUoXCIgKyBjdXJSb3RhdGUgKiAzNjAgKyBcImRlZylcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFBvc2l0aW9uKGVsZW0pIHtcbiAgICB2YXIgcmVjdCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICByZXR1cm4gW3JlY3QubGVmdCArIChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSAvIDIsIHJlY3QudG9wICsgKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApIC8gMl07XG4gIH1cblxuICBmdW5jdGlvbiBnZXRNb3VzZUFuZ2xlKGV2ZW50LCBjZW50ZXJFbGVtKSB7XG4gICAgdmFyIHBvcyA9IGdldFBvc2l0aW9uKGNlbnRlckVsZW0pO1xuICAgIHZhciBjdXJzb3IgPSBbZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WV07XG4gICAgdmFyIHJhZCA9IHZvaWQgMDtcblxuICAgIGlmIChldmVudC50YXJnZXRUb3VjaGVzICYmIGV2ZW50LnRhcmdldFRvdWNoZXNbMF0pIHtcbiAgICAgIGN1cnNvciA9IFtldmVudC50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFgsIGV2ZW50LnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WV07XG4gICAgfVxuXG4gICAgcmFkID0gTWF0aC5hdGFuMihjdXJzb3JbMV0gLSBwb3NbMV0sIGN1cnNvclswXSAtIHBvc1swXSk7XG4gICAgcmFkICs9IE1hdGguUEkgLyAyO1xuXG4gICAgcmV0dXJuIHJhZDtcbiAgfVxuXG4gIHZhciBrbm9iRHJhZ2dlZCA9IHZvaWQgMDtcbiAgdmFyIHByZXZBbmdsZVJhZCA9IG51bGw7XG4gIHZhciBwcmV2Um90YXRlID0gbnVsbDtcblxuICBmdW5jdGlvbiBzdGFydERyYWdnaW5nKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB2YXIgcmFkID0gZ2V0TW91c2VBbmdsZShlLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmtub2JfY2VudGVyXCIpKTtcblxuICAgIGtub2JEcmFnZ2VkID0gdHJ1ZTtcbiAgICBwcmV2QW5nbGVSYWQgPSByYWQ7XG4gICAgcHJldlJvdGF0ZSA9IGN1clJvdGF0ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3BEcmFnZ2luZyhlKSB7XG4gICAga25vYkRyYWdnZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYWdSb3RhdGUoZSkge1xuICAgIGlmICgha25vYkRyYWdnZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgb2xkID0gcHJldkFuZ2xlUmFkO1xuICAgIHZhciByYWQgPSBnZXRNb3VzZUFuZ2xlKGUsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIua25vYl9jZW50ZXJcIikpO1xuICAgIHZhciBkZWx0YSA9IHJhZCAtIG9sZDtcblxuICAgIHByZXZBbmdsZVJhZCA9IHJhZDtcblxuICAgIGlmIChkZWx0YSA8IDApIHtcbiAgICAgIGRlbHRhICs9IE1hdGguUEkgKiAyO1xuICAgIH1cbiAgICBpZiAoZGVsdGEgPiBNYXRoLlBJKSB7XG4gICAgICBkZWx0YSAtPSBNYXRoLlBJICogMjtcbiAgICB9XG5cbiAgICB2YXIgZGVsdGFSb3RhdGUgPSBkZWx0YSAvIE1hdGguUEkgLyAyO1xuICAgIHZhciByb3RhdGUgPSBwcmV2Um90YXRlICsgZGVsdGFSb3RhdGU7XG5cbiAgICBwcmV2Um90YXRlID0gcm90YXRlO1xuICAgIHNldFJvdGF0ZShyb3RhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0RXZ0TGlzdGVuZXJzKCkge1xuICAgIHZhciBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5rbm9iLWNvbnRhaW5lclwiKTtcblxuICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBzdGFydERyYWdnaW5nKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBzdG9wRHJhZ2dpbmcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZHJhZ1JvdGF0ZSk7XG4gICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBzdGFydERyYWdnaW5nKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgc3RvcERyYWdnaW5nKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIGRyYWdSb3RhdGUpO1xuICB9XG5cbiAgc2V0RXZ0TGlzdGVuZXJzKCk7XG4gIHNldFJvdGF0ZSgwKTtcblxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX2Nsb3NlXCIpLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcbiAgICBiLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpLmZvckVhY2goZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgbS5jbGFzc0xpc3QudG9nZ2xlKFwibW9kYWxfb3BlblwiLCBmYWxzZSk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxuICB2YXIgVEVNUFMgPSB7XG4gICAgbWFudWFsOiAtMTAsXG4gICAgY29sZDogMCxcbiAgICB3YXJtOiAyMyxcbiAgICBob3Q6IDMwXG4gIH07XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZmlsdGVyLWl0ZW1fdGVtcFwiKS5mb3JFYWNoKGZ1bmN0aW9uIChsKSB7XG4gICAgbC5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGp1c3QtYmFyX3RoZW1lX3RlbXBcIikudmFsdWUgPSBURU1QU1t0aGlzLmlkXTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfdGVtcCAubW9kYWxfX3ZhbHVlXCIpLmlubmVySFRNTCA9IFRFTVBTW3RoaXMuaWRdID4gMCA/IFwiK1wiICsgVEVNUFNbdGhpcy5pZF0gOiBURU1QU1t0aGlzLmlkXTtcbiAgICB9O1xuICB9KTtcblxuICB2YXIgc2hvd01vZGFsID0gZnVuY3Rpb24gc2hvd01vZGFsKHNlbGVjdG9yKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikuY2xhc3NMaXN0LnRvZ2dsZShcIm1vZGFsX29wZW5cIiwgdHJ1ZSk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIikuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuICB9O1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucGFuZWxfdGVtcFwiKS5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7XG4gICAgcC5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgc2hvd01vZGFsKFwiLm1vZGFsX3RlbXBcIik7XG4gICAgfTtcbiAgfSk7XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wYW5lbF9sYW1wXCIpLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICBwLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBzaG93TW9kYWwoXCIubW9kYWxfbGlnaHRcIik7XG4gICAgfTtcbiAgfSk7XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wYW5lbF9mbG9vclwiKS5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7XG4gICAgcC5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgc2hvd01vZGFsKFwiLm1vZGFsX2tub2JcIik7XG4gICAgfTtcbiAgfSk7XG5cbiAgdmFyIGFycm93TGVmdFNjZW5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zY2VuYXJpb3NfX3BhZ2luYXRvciAucGFnaW5hdG9yX19hcnJvd19sZWZ0XCIpO1xuICB2YXIgYXJyb3dSaWdodFNjZW5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zY2VuYXJpb3NfX3BhZ2luYXRvciAucGFnaW5hdG9yX19hcnJvd19yaWdodFwiKTtcbiAgdmFyIHBhbmVsQ291bnRTY2VucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2NlbmFyaW9zX19wYW5lbFwiKS5sZW5ndGg7XG4gIHZhciBwYWdlQ291bnRTY2VucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2NlbmFyaW9zX19wYWdlXCIpLmxlbmd0aDtcbiAgdmFyIHNjZW5hcmlvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2NlbmFyaW9zXCIpO1xuICB2YXIgcGFnaWFudG9yU2NlbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNjZW5hcmlvc19fcGFnaW5hdG9yXCIpO1xuICB2YXIgY3VycmVudFBhZ2UgPSAxO1xuXG4gIHBhZ2lhbnRvclNjZW5zLmNsYXNzTGlzdC50b2dnbGUoXCJwYWdpbmF0b3JfaGlkZVwiLCBwYW5lbENvdW50U2NlbnMgPD0gOSk7XG5cbiAgYXJyb3dSaWdodFNjZW5zLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGN1cnJlbnRQYWdlIDwgcGFnZUNvdW50U2NlbnMpIHtcbiAgICAgIGN1cnJlbnRQYWdlICs9IDE7XG4gICAgICBhcnJvd1JpZ2h0U2NlbnMuY2xhc3NMaXN0LnRvZ2dsZShcInBhZ2luYXRvcl9fYXJyb3dfZGlzYWJsZWRcIiwgY3VycmVudFBhZ2UgPT09IHBhZ2VDb3VudFNjZW5zKTtcbiAgICAgIGFycm93TGVmdFNjZW5zLmNsYXNzTGlzdC50b2dnbGUoXCJwYWdpbmF0b3JfX2Fycm93X2Rpc2FibGVkXCIsIGN1cnJlbnRQYWdlID09PSAxKTtcbiAgICAgIHNjZW5hcmlvcy5zY3JvbGwoe1xuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGxlZnQ6IDY0NSxcbiAgICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgYXJyb3dMZWZ0U2NlbnMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoY3VycmVudFBhZ2UgPiAxKSB7XG4gICAgICBjdXJyZW50UGFnZSAtPSAxO1xuICAgICAgYXJyb3dSaWdodFNjZW5zLmNsYXNzTGlzdC50b2dnbGUoXCJwYWdpbmF0b3JfX2Fycm93X2Rpc2FibGVkXCIsIGN1cnJlbnRQYWdlID09PSBwYWdlQ291bnRTY2Vucyk7XG4gICAgICBhcnJvd0xlZnRTY2Vucy5jbGFzc0xpc3QudG9nZ2xlKFwicGFnaW5hdG9yX19hcnJvd19kaXNhYmxlZFwiLCBjdXJyZW50UGFnZSA9PT0gMSk7XG4gICAgICBzY2VuYXJpb3Muc2Nyb2xsKHtcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiAtNjQ1LFxuICAgICAgICBiZWhhdmlvcjogXCJzbW9vdGhcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICB2YXIgc2VsZWN0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5maWx0ZXJfX3NlbGVjdC1idXR0b25cIik7XG4gIHZhciBzZWxlY3RCdXR0b25UZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5maWx0ZXJfX3NlbGVjdC1idXR0b24gLmJ1dHRvbl9fdGV4dFwiKTtcbiAgdmFyIHNlbGVjdE9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZpbHRlcl9fc2VsZWN0LWl0ZW1cIik7XG4gIHZhciBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmlsdGVyX19zZWxlY3QtcG9wdXBcIik7XG5cbiAgc2VsZWN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgcG9wdXAuY2xhc3NMaXN0LnRvZ2dsZShcImZpbHRlcl9fc2VsZWN0LXBvcHVwX29wZW5cIik7XG4gIH0pO1xuXG4gIHNlbGVjdE9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAobykge1xuICAgIG8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI1wiICsgZS50YXJnZXQuZGF0YXNldC5ncm91cCkuY2hlY2tlZCA9IHRydWU7XG5cbiAgICAgIHNlbGVjdE9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAob3B0KSB7XG4gICAgICAgIHJldHVybiBvcHQuY2xhc3NMaXN0LnRvZ2dsZShcImZpbHRlcl9fc2VsZWN0LWl0ZW1fY2hlY2tlZFwiLCBmYWxzZSk7XG4gICAgICB9KTtcbiAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJmaWx0ZXJfX3NlbGVjdC1pdGVtX2NoZWNrZWRcIiwgdHJ1ZSk7XG4gICAgICBwb3B1cC5jbGFzc0xpc3QudG9nZ2xlKFwiZmlsdGVyX19zZWxlY3QtcG9wdXBfb3BlblwiLCBmYWxzZSk7XG4gICAgICBzZWxlY3RCdXR0b25UZXh0LmlubmVyVGV4dCA9IGUudGFyZ2V0LmlubmVyVGV4dDtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51X19pY29uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51XCIpLmNsYXNzTGlzdC50b2dnbGUoXCJtZW51X29wZW5cIik7XG4gIH0pO1xufSk7Il19

"use strict";document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".modal__value");document.querySelector(".adjust-bar.adjust-bar_theme_temp").oninput=function(){e.innerHTML=0<this.value?"+"+this.value:this.value};var t=document.querySelector(".devices__paginator .paginator__arrow_left"),o=document.querySelector(".devices__paginator .paginator__arrow_right"),n=document.querySelectorAll(".devices__panel").length,r=document.querySelector(".devices"),c=document.querySelector(".devices__paginator"),l=1;c.classList.toggle("paginator_hide",n<7),o.addEventListener("click",function(){l+=1,t.classList.toggle("paginator__arrow_disabled",1===l),r.scroll({top:0,left:1366,behavior:"smooth"})}),t.addEventListener("click",function(){1<l&&(l-=1,t.classList.toggle("paginator__arrow_disabled",1===l),r.scroll({top:0,left:-1366,behavior:"smooth"}))});var a=void 0,i=void 0,u=.42,d=-.42,s=265,_=function(e){return Math.floor(Math.abs(360*e*1.73+s)/53+26)};function m(e){u<e?e=u:e<d&&(e=d),a=_(i=e),document.querySelector(".modal_knob .modal__value").innerHTML="+"+a,document.querySelector(".knob__value").innerHTML="+"+a,document.querySelector(".knob__indicator").style.strokeDasharray=360*i*1.73+s+" 629",document.querySelector(".knob__arrow").style.transform="rotate("+360*i+"deg)"}function g(e,t){var o,n=[(o=t.getBoundingClientRect()).left+(o.right-o.left)/2,o.top+(o.bottom-o.top)/2],r=[e.clientX,e.clientY],c=void 0;return e.targetTouches&&e.targetTouches[0]&&(r=[e.targetTouches[0].clientX,e.targetTouches[0].clientY]),c=Math.atan2(r[1]-n[1],r[0]-n[0]),c+=Math.PI/2}var f,p=void 0,h=null,v=null;function y(e){e.preventDefault(),e.stopPropagation();var t=g(e,document.querySelector(".knob_center"));p=!0,h=t,v=i}function q(e){p=!1}function S(e){if(p){var t=h,o=g(e,document.querySelector(".knob_center")),n=o-t;h=o,n<0&&(n+=2*Math.PI),n>Math.PI&&(n-=2*Math.PI);var r=n/Math.PI/2,c=v+r;m(v=c)}}(f=document.querySelector(".knob-container")).addEventListener("mousedown",y),document.addEventListener("mouseup",q),document.addEventListener("mousemove",S),f.addEventListener("touchstart",y),document.addEventListener("touchend",q),document.addEventListener("touchmove",S),m(0),document.querySelectorAll(".modal_close").forEach(function(e){e.onclick=function(){document.querySelectorAll(".modal").forEach(function(e){e.classList.toggle("modal_open",!1),document.querySelector("body").style.overflow="auto"})}});var L={manual:-10,cold:0,warm:23,hot:30};document.querySelectorAll(".modal__filter-item_temp").forEach(function(e){e.onclick=function(){document.querySelector(".adjust-bar_theme_temp").value=L[this.id],document.querySelector(".modal_temp .modal__value").innerHTML=0<L[this.id]?"+"+L[this.id]:L[this.id]}});var b=function(e){document.querySelector(e).classList.toggle("modal_open",!0),document.querySelector("body").style.overflow="hidden"};document.querySelectorAll(".panel_temp").forEach(function(e){e.onclick=function(){b(".modal_temp")}}),document.querySelectorAll(".panel_lamp").forEach(function(e){e.onclick=function(){b(".modal_light")}}),document.querySelectorAll(".panel_floor").forEach(function(e){e.onclick=function(){b(".modal_knob")}});var k=document.querySelector(".scenarios__paginator .paginator__arrow_left"),E=document.querySelector(".scenarios__paginator .paginator__arrow_right"),w=document.querySelectorAll(".scenarios__panel").length,M=document.querySelectorAll(".scenarios__page").length,A=document.querySelector(".scenarios"),T=document.querySelector(".scenarios__paginator"),P=1;T.classList.toggle("paginator_hide",w<=9),E.addEventListener("click",function(){P<M&&(P+=1,E.classList.toggle("paginator__arrow_disabled",P===M),k.classList.toggle("paginator__arrow_disabled",1===P),A.scroll({top:0,left:645,behavior:"smooth"}))}),k.addEventListener("click",function(){1<P&&(P-=1,E.classList.toggle("paginator__arrow_disabled",P===M),k.classList.toggle("paginator__arrow_disabled",1===P),A.scroll({top:0,left:-645,behavior:"smooth"}))});var I=document.querySelector(".filter__select-button"),H=document.querySelector(".filter__select-button .button__text"),j=document.querySelectorAll(".filter__select-item"),x=document.querySelector(".filter__select-popup");I.addEventListener("click",function(){x.classList.toggle("filter__select-popup_open")}),j.forEach(function(e){e.addEventListener("click",function(e){document.querySelector("#"+e.target.dataset.group).checked=!0,j.forEach(function(e){return e.classList.toggle("filter__select-item_checked",!1)}),e.target.classList.toggle("filter__select-item_checked",!0),x.classList.toggle("filter__select-popup_open",!1),H.innerText=e.target.innerText})}),document.querySelector(".menu__icon").addEventListener("click",function(){document.querySelector(".menu").classList.toggle("menu_open")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwib3V0cHV0IiwicXVlcnlTZWxlY3RvciIsIm9uaW5wdXQiLCJpbm5lckhUTUwiLCJ0aGlzIiwidmFsdWUiLCJhcnJvd0xlZnREZXZzIiwiYXJyb3dSaWdodERldnMiLCJwYW5lbENvdW50RGV2cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsZW5ndGgiLCJkZXZpY2VzIiwicGFnaWFudG9yRGV2cyIsImN1cnJlbnRQYWdlRGV2cyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInNjcm9sbCIsInRvcCIsImxlZnQiLCJiZWhhdmlvciIsImN1clZhbHVlIiwiY3VyUm90YXRlIiwibWF4Um90YXRlIiwibWluUm90YXRlIiwiSU5ESUNBVE9SX09GRlNFVCIsInJvdGF0ZVRvVmFsdWUiLCJyb3RhdGUiLCJNYXRoIiwiZmxvb3IiLCJhYnMiLCJzZXRSb3RhdGUiLCJzdHlsZSIsInN0cm9rZURhc2hhcnJheSIsInRyYW5zZm9ybSIsImdldE1vdXNlQW5nbGUiLCJldmVudCIsImNlbnRlckVsZW0iLCJyZWN0IiwicG9zIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicmlnaHQiLCJib3R0b20iLCJjdXJzb3IiLCJjbGllbnRYIiwiY2xpZW50WSIsInJhZCIsInRhcmdldFRvdWNoZXMiLCJhdGFuMiIsIlBJIiwiZWxlbSIsImtub2JEcmFnZ2VkIiwicHJldkFuZ2xlUmFkIiwicHJldlJvdGF0ZSIsInN0YXJ0RHJhZ2dpbmciLCJlIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJzdG9wRHJhZ2dpbmciLCJkcmFnUm90YXRlIiwib2xkIiwiZGVsdGEiLCJkZWx0YVJvdGF0ZSIsImZvckVhY2giLCJiIiwib25jbGljayIsIm0iLCJvdmVyZmxvdyIsIlRFTVBTIiwibWFudWFsIiwiY29sZCIsIndhcm0iLCJob3QiLCJsIiwiaWQiLCJzaG93TW9kYWwiLCJzZWxlY3RvciIsInAiLCJhcnJvd0xlZnRTY2VucyIsImFycm93UmlnaHRTY2VucyIsInBhbmVsQ291bnRTY2VucyIsInBhZ2VDb3VudFNjZW5zIiwic2NlbmFyaW9zIiwicGFnaWFudG9yU2NlbnMiLCJjdXJyZW50UGFnZSIsInNlbGVjdEJ1dHRvbiIsInNlbGVjdEJ1dHRvblRleHQiLCJzZWxlY3RPcHRpb25zIiwicG9wdXAiLCJvIiwidGFyZ2V0IiwiZGF0YXNldCIsImdyb3VwIiwiY2hlY2tlZCIsIm9wdCIsImlubmVyVGV4dCJdLCJtYXBwaW5ncyI6IkFBQUEsYUFFQUEsU0FBQUMsaUJBQUEsbUJBQUEsV0FDQSxJQUFBQyxFQUFBRixTQUFBRyxjQUFBLGlCQUNBSCxTQUFBRyxjQUFBLHFDQUVBQyxRQUFBLFdBQ0FGLEVBQUFHLFVBQUEsRUFBQUMsS0FBQUMsTUFBQSxJQUFBRCxLQUFBQyxNQUFBRCxLQUFBQyxPQUdBLElBQUFDLEVBQUFSLFNBQUFHLGNBQUEsOENBQ0FNLEVBQUFULFNBQUFHLGNBQUEsK0NBQ0FPLEVBQUFWLFNBQUFXLGlCQUFBLG1CQUFBQyxPQUNBQyxFQUFBYixTQUFBRyxjQUFBLFlBQ0FXLEVBQUFkLFNBQUFHLGNBQUEsdUJBQ0FZLEVBQUEsRUFFQUQsRUFBQUUsVUFBQUMsT0FBQSxpQkFBQVAsRUFBQSxHQUVBRCxFQUFBUixpQkFBQSxRQUFBLFdBQ0FjLEdBQUEsRUFDQVAsRUFBQVEsVUFBQUMsT0FBQSw0QkFBQSxJQUFBRixHQUNBRixFQUFBSyxPQUFBLENBQ0FDLElBQUEsRUFDQUMsS0FBQSxLQUNBQyxTQUFBLGFBSUFiLEVBQUFQLGlCQUFBLFFBQUEsV0FDQSxFQUFBYyxJQUNBQSxHQUFBLEVBQ0FQLEVBQUFRLFVBQUFDLE9BQUEsNEJBQUEsSUFBQUYsR0FDQUYsRUFBQUssT0FBQSxDQUNBQyxJQUFBLEVBQ0FDLE1BQUEsS0FDQUMsU0FBQSxjQUtBLElBQUFDLE9BQUEsRUFDQUMsT0FBQSxFQUNBQyxFQUFBLElBQ0FDLEdBQUEsSUFJQUMsRUFBQSxJQUVBQyxFQUFBLFNBQUFDLEdBQ0Es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QUFBRyxjQUFBLHdDQUNBcUYsRUFBQXhGLFNBQUFXLGlCQUFBLHdCQUNBOEUsRUFBQXpGLFNBQUFHLGNBQUEseUJBRUFtRixFQUFBckYsaUJBQUEsUUFBQSxXQUNBd0YsRUFBQXpFLFVBQUFDLE9BQUEsK0JBR0F1RSxFQUFBeEIsUUFBQSxTQUFBMEIsR0FDQUEsRUFBQXpGLGlCQUFBLFFBQUEsU0FBQXVELEdBQ0F4RCxTQUFBRyxjQUFBLElBQUFxRCxFQUFBbUMsT0FBQUMsUUFBQUMsT0FBQUMsU0FBQSxFQUVBTixFQUFBeEIsUUFBQSxTQUFBK0IsR0FDQSxPQUFBQSxFQUFBL0UsVUFBQUMsT0FBQSwrQkFBQSxLQUVBdUMsRUFBQW1DLE9BQUEzRSxVQUFBQyxPQUFBLCtCQUFBLEdBQ0F3RSxFQUFBekUsVUFBQUMsT0FBQSw2QkFBQSxHQUNBc0UsRUFBQVMsVUFBQXhDLEVBQUFtQyxPQUFBSyxjQUlBaEcsU0FBQUcsY0FBQSxlQUFBRixpQkFBQSxRQUFBLFdBQ0FELFNBQUFHLGNBQUEsU0FBQWEsVUFBQUMsT0FBQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBvdXRwdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX192YWx1ZVwiKTtcbiAgdmFyIHJhbmdlU0xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGp1c3QtYmFyLmFkanVzdC1iYXJfdGhlbWVfdGVtcFwiKTtcblxuICByYW5nZVNMaWRlci5vbmlucHV0ID0gZnVuY3Rpb24gKCkge1xuICAgIG91dHB1dC5pbm5lckhUTUwgPSB0aGlzLnZhbHVlID4gMCA/IFwiK1wiICsgdGhpcy52YWx1ZSA6IHRoaXMudmFsdWU7XG4gIH07XG5cbiAgdmFyIGFycm93TGVmdERldnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRldmljZXNfX3BhZ2luYXRvciAucGFnaW5hdG9yX19hcnJvd19sZWZ0XCIpO1xuICB2YXIgYXJyb3dSaWdodERldnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRldmljZXNfX3BhZ2luYXRvciAucGFnaW5hdG9yX19hcnJvd19yaWdodFwiKTtcbiAgdmFyIHBhbmVsQ291bnREZXZzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5kZXZpY2VzX19wYW5lbFwiKS5sZW5ndGg7XG4gIHZhciBkZXZpY2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kZXZpY2VzXCIpO1xuICB2YXIgcGFnaWFudG9yRGV2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGV2aWNlc19fcGFnaW5hdG9yXCIpO1xuICB2YXIgY3VycmVudFBhZ2VEZXZzID0gMTtcblxuICBwYWdpYW50b3JEZXZzLmNsYXNzTGlzdC50b2dnbGUoXCJwYWdpbmF0b3JfaGlkZVwiLCBwYW5lbENvdW50RGV2cyA8IDcpO1xuXG4gIGFycm93UmlnaHREZXZzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgY3VycmVudFBhZ2VEZXZzICs9IDE7XG4gICAgYXJyb3dMZWZ0RGV2cy5jbGFzc0xpc3QudG9nZ2xlKFwicGFnaW5hdG9yX19hcnJvd19kaXNhYmxlZFwiLCBjdXJyZW50UGFnZURldnMgPT09IDEpO1xuICAgIGRldmljZXMuc2Nyb2xsKHtcbiAgICAgIHRvcDogMCxcbiAgICAgIGxlZnQ6IDEzNjYsXG4gICAgICBiZWhhdmlvcjogXCJzbW9vdGhcIlxuICAgIH0pO1xuICB9KTtcblxuICBhcnJvd0xlZnREZXZzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGN1cnJlbnRQYWdlRGV2cyA+IDEpIHtcbiAgICAgIGN1cnJlbnRQYWdlRGV2cyAtPSAxO1xuICAgICAgYXJyb3dMZWZ0RGV2cy5jbGFzc0xpc3QudG9nZ2xlKFwicGFnaW5hdG9yX19hcnJvd19kaXNhYmxlZFwiLCBjdXJyZW50UGFnZURldnMgPT09IDEpO1xuICAgICAgZGV2aWNlcy5zY3JvbGwoe1xuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGxlZnQ6IC0xMzY2LFxuICAgICAgICBiZWhhdmlvcjogXCJzbW9vdGhcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICB2YXIgY3VyVmFsdWUgPSB2b2lkIDA7XG4gIHZhciBjdXJSb3RhdGUgPSB2b2lkIDA7XG4gIHZhciBtYXhSb3RhdGUgPSAwLjQyOyAvLyAxNTAg0LPRgNCw0LTRg9GB0L7QslxuICB2YXIgbWluUm90YXRlID0gLTAuNDI7IC8vIC0xNTAg0LPRgNCw0LTRg9GB0L7QslxuXG4gIHZhciBNSU5fVkFMVUUgPSAyNjtcbiAgdmFyIE1BWF9WQUxVRSA9IDM1O1xuICB2YXIgSU5ESUNBVE9SX09GRlNFVCA9IDI2NTtcblxuICB2YXIgcm90YXRlVG9WYWx1ZSA9IGZ1bmN0aW9uIHJvdGF0ZVRvVmFsdWUocm90YXRlKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5hYnMocm90YXRlICogMzYwICogMS43MyArIElORElDQVRPUl9PRkZTRVQpIC8gNTMgKyBNSU5fVkFMVUUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge051bWJlcn0gcm90YXRlINCa0L7Qu9C40YfQtdGB0YLQstC+INC+0LHQvtGA0L7RgtC+0LIg0L7RgiDQvdC10LnRgtGA0LjQsNC70YzQvdC+0LPQviDQv9C+0LvQvtC20LXQvdC40Y8uXG4gICAqL1xuICBmdW5jdGlvbiBzZXRSb3RhdGUocm90YXRlKSB7XG4gICAgaWYgKHJvdGF0ZSA+IG1heFJvdGF0ZSkge1xuICAgICAgcm90YXRlID0gbWF4Um90YXRlO1xuICAgIH0gZWxzZSBpZiAocm90YXRlIDwgbWluUm90YXRlKSB7XG4gICAgICByb3RhdGUgPSBtaW5Sb3RhdGU7XG4gICAgfVxuXG4gICAgY3VyUm90YXRlID0gcm90YXRlO1xuICAgIGN1clZhbHVlID0gcm90YXRlVG9WYWx1ZShyb3RhdGUpO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9rbm9iIC5tb2RhbF9fdmFsdWVcIikuaW5uZXJIVE1MID0gXCIrXCIgKyBjdXJWYWx1ZTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmtub2JfX3ZhbHVlXCIpLmlubmVySFRNTCA9IFwiK1wiICsgY3VyVmFsdWU7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5rbm9iX19pbmRpY2F0b3JcIikuc3R5bGUuc3Ryb2tlRGFzaGFycmF5ID0gY3VyUm90YXRlICogMzYwICogMS43MyArIElORElDQVRPUl9PRkZTRVQgKyBcIiA2MjlcIjtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmtub2JfX2Fycm93XCIpLnN0eWxlLnRyYW5zZm9ybSA9IFwicm90YXRlKFwiICsgY3VyUm90YXRlICogMzYwICsgXCJkZWcpXCI7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRQb3NpdGlvbihlbGVtKSB7XG4gICAgdmFyIHJlY3QgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgcmV0dXJuIFtyZWN0LmxlZnQgKyAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkgLyAyLCByZWN0LnRvcCArIChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKSAvIDJdO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0TW91c2VBbmdsZShldmVudCwgY2VudGVyRWxlbSkge1xuICAgIHZhciBwb3MgPSBnZXRQb3NpdGlvbihjZW50ZXJFbGVtKTtcbiAgICB2YXIgY3Vyc29yID0gW2V2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFldO1xuICAgIHZhciByYWQgPSB2b2lkIDA7XG5cbiAgICBpZiAoZXZlbnQudGFyZ2V0VG91Y2hlcyAmJiBldmVudC50YXJnZXRUb3VjaGVzWzBdKSB7XG4gICAgICBjdXJzb3IgPSBbZXZlbnQudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRYLCBldmVudC50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFldO1xuICAgIH1cblxuICAgIHJhZCA9IE1hdGguYXRhbjIoY3Vyc29yWzFdIC0gcG9zWzFdLCBjdXJzb3JbMF0gLSBwb3NbMF0pO1xuICAgIHJhZCArPSBNYXRoLlBJIC8gMjtcblxuICAgIHJldHVybiByYWQ7XG4gIH1cblxuICB2YXIga25vYkRyYWdnZWQgPSB2b2lkIDA7XG4gIHZhciBwcmV2QW5nbGVSYWQgPSBudWxsO1xuICB2YXIgcHJldlJvdGF0ZSA9IG51bGw7XG5cbiAgZnVuY3Rpb24gc3RhcnREcmFnZ2luZyhlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdmFyIHJhZCA9IGdldE1vdXNlQW5nbGUoZSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5rbm9iX2NlbnRlclwiKSk7XG5cbiAgICBrbm9iRHJhZ2dlZCA9IHRydWU7XG4gICAgcHJldkFuZ2xlUmFkID0gcmFkO1xuICAgIHByZXZSb3RhdGUgPSBjdXJSb3RhdGU7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wRHJhZ2dpbmcoZSkge1xuICAgIGtub2JEcmFnZ2VkID0gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBkcmFnUm90YXRlKGUpIHtcbiAgICBpZiAoIWtub2JEcmFnZ2VkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG9sZCA9IHByZXZBbmdsZVJhZDtcbiAgICB2YXIgcmFkID0gZ2V0TW91c2VBbmdsZShlLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmtub2JfY2VudGVyXCIpKTtcbiAgICB2YXIgZGVsdGEgPSByYWQgLSBvbGQ7XG5cbiAgICBwcmV2QW5nbGVSYWQgPSByYWQ7XG5cbiAgICBpZiAoZGVsdGEgPCAwKSB7XG4gICAgICBkZWx0YSArPSBNYXRoLlBJICogMjtcbiAgICB9XG4gICAgaWYgKGRlbHRhID4gTWF0aC5QSSkge1xuICAgICAgZGVsdGEgLT0gTWF0aC5QSSAqIDI7XG4gICAgfVxuXG4gICAgdmFyIGRlbHRhUm90YXRlID0gZGVsdGEgLyBNYXRoLlBJIC8gMjtcbiAgICB2YXIgcm90YXRlID0gcHJldlJvdGF0ZSArIGRlbHRhUm90YXRlO1xuXG4gICAgcHJldlJvdGF0ZSA9IHJvdGF0ZTtcbiAgICBzZXRSb3RhdGUocm90YXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEV2dExpc3RlbmVycygpIHtcbiAgICB2YXIgZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIua25vYi1jb250YWluZXJcIik7XG5cbiAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgc3RhcnREcmFnZ2luZyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgc3RvcERyYWdnaW5nKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGRyYWdSb3RhdGUpO1xuICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgc3RhcnREcmFnZ2luZyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHN0b3BEcmFnZ2luZyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCBkcmFnUm90YXRlKTtcbiAgfVxuXG4gIHNldEV2dExpc3RlbmVycygpO1xuICBzZXRSb3RhdGUoMCk7XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9jbG9zZVwiKS5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XG4gICAgYi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKS5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgIG0uY2xhc3NMaXN0LnRvZ2dsZShcIm1vZGFsX29wZW5cIiwgZmFsc2UpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKS5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgdmFyIFRFTVBTID0ge1xuICAgIG1hbnVhbDogLTEwLFxuICAgIGNvbGQ6IDAsXG4gICAgd2FybTogMjMsXG4gICAgaG90OiAzMFxuICB9O1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2ZpbHRlci1pdGVtX3RlbXBcIikuZm9yRWFjaChmdW5jdGlvbiAobCkge1xuICAgIGwub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRqdXN0LWJhcl90aGVtZV90ZW1wXCIpLnZhbHVlID0gVEVNUFNbdGhpcy5pZF07XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX3RlbXAgLm1vZGFsX192YWx1ZVwiKS5pbm5lckhUTUwgPSBURU1QU1t0aGlzLmlkXSA+IDAgPyBcIitcIiArIFRFTVBTW3RoaXMuaWRdIDogVEVNUFNbdGhpcy5pZF07XG4gICAgfTtcbiAgfSk7XG5cbiAgdmFyIHNob3dNb2RhbCA9IGZ1bmN0aW9uIHNob3dNb2RhbChzZWxlY3Rvcikge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpLmNsYXNzTGlzdC50b2dnbGUoXCJtb2RhbF9vcGVuXCIsIHRydWUpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcbiAgfTtcblxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBhbmVsX3RlbXBcIikuZm9yRWFjaChmdW5jdGlvbiAocCkge1xuICAgIHAub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHNob3dNb2RhbChcIi5tb2RhbF90ZW1wXCIpO1xuICAgIH07XG4gIH0pO1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucGFuZWxfbGFtcFwiKS5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7XG4gICAgcC5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgc2hvd01vZGFsKFwiLm1vZGFsX2xpZ2h0XCIpO1xuICAgIH07XG4gIH0pO1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucGFuZWxfZmxvb3JcIikuZm9yRWFjaChmdW5jdGlvbiAocCkge1xuICAgIHAub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHNob3dNb2RhbChcIi5tb2RhbF9rbm9iXCIpO1xuICAgIH07XG4gIH0pO1xuXG4gIHZhciBhcnJvd0xlZnRTY2VucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2NlbmFyaW9zX19wYWdpbmF0b3IgLnBhZ2luYXRvcl9fYXJyb3dfbGVmdFwiKTtcbiAgdmFyIGFycm93UmlnaHRTY2VucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2NlbmFyaW9zX19wYWdpbmF0b3IgLnBhZ2luYXRvcl9fYXJyb3dfcmlnaHRcIik7XG4gIHZhciBwYW5lbENvdW50U2NlbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNjZW5hcmlvc19fcGFuZWxcIikubGVuZ3RoO1xuICB2YXIgcGFnZUNvdW50U2NlbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNjZW5hcmlvc19fcGFnZVwiKS5sZW5ndGg7XG4gIHZhciBzY2VuYXJpb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNjZW5hcmlvc1wiKTtcbiAgdmFyIHBhZ2lhbnRvclNjZW5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zY2VuYXJpb3NfX3BhZ2luYXRvclwiKTtcbiAgdmFyIGN1cnJlbnRQYWdlID0gMTtcblxuICBwYWdpYW50b3JTY2Vucy5jbGFzc0xpc3QudG9nZ2xlKFwicGFnaW5hdG9yX2hpZGVcIiwgcGFuZWxDb3VudFNjZW5zIDw9IDkpO1xuXG4gIGFycm93UmlnaHRTY2Vucy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIGlmIChjdXJyZW50UGFnZSA8IHBhZ2VDb3VudFNjZW5zKSB7XG4gICAgICBjdXJyZW50UGFnZSArPSAxO1xuICAgICAgYXJyb3dSaWdodFNjZW5zLmNsYXNzTGlzdC50b2dnbGUoXCJwYWdpbmF0b3JfX2Fycm93X2Rpc2FibGVkXCIsIGN1cnJlbnRQYWdlID09PSBwYWdlQ291bnRTY2Vucyk7XG4gICAgICBhcnJvd0xlZnRTY2Vucy5jbGFzc0xpc3QudG9nZ2xlKFwicGFnaW5hdG9yX19hcnJvd19kaXNhYmxlZFwiLCBjdXJyZW50UGFnZSA9PT0gMSk7XG4gICAgICBzY2VuYXJpb3Muc2Nyb2xsKHtcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiA2NDUsXG4gICAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIGFycm93TGVmdFNjZW5zLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGN1cnJlbnRQYWdlID4gMSkge1xuICAgICAgY3VycmVudFBhZ2UgLT0gMTtcbiAgICAgIGFycm93UmlnaHRTY2Vucy5jbGFzc0xpc3QudG9nZ2xlKFwicGFnaW5hdG9yX19hcnJvd19kaXNhYmxlZFwiLCBjdXJyZW50UGFnZSA9PT0gcGFnZUNvdW50U2NlbnMpO1xuICAgICAgYXJyb3dMZWZ0U2NlbnMuY2xhc3NMaXN0LnRvZ2dsZShcInBhZ2luYXRvcl9fYXJyb3dfZGlzYWJsZWRcIiwgY3VycmVudFBhZ2UgPT09IDEpO1xuICAgICAgc2NlbmFyaW9zLnNjcm9sbCh7XG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbGVmdDogLTY0NSxcbiAgICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIHNlbGVjdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmlsdGVyX19zZWxlY3QtYnV0dG9uXCIpO1xuICB2YXIgc2VsZWN0QnV0dG9uVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmlsdGVyX19zZWxlY3QtYnV0dG9uIC5idXR0b25fX3RleHRcIik7XG4gIHZhciBzZWxlY3RPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5maWx0ZXJfX3NlbGVjdC1pdGVtXCIpO1xuICB2YXIgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZpbHRlcl9fc2VsZWN0LXBvcHVwXCIpO1xuXG4gIHNlbGVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIHBvcHVwLmNsYXNzTGlzdC50b2dnbGUoXCJmaWx0ZXJfX3NlbGVjdC1wb3B1cF9vcGVuXCIpO1xuICB9KTtcblxuICBzZWxlY3RPcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKG8pIHtcbiAgICBvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNcIiArIGUudGFyZ2V0LmRhdGFzZXQuZ3JvdXApLmNoZWNrZWQgPSB0cnVlO1xuXG4gICAgICBzZWxlY3RPcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKG9wdCkge1xuICAgICAgICByZXR1cm4gb3B0LmNsYXNzTGlzdC50b2dnbGUoXCJmaWx0ZXJfX3NlbGVjdC1pdGVtX2NoZWNrZWRcIiwgZmFsc2UpO1xuICAgICAgfSk7XG4gICAgICBlLnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiZmlsdGVyX19zZWxlY3QtaXRlbV9jaGVja2VkXCIsIHRydWUpO1xuICAgICAgcG9wdXAuY2xhc3NMaXN0LnRvZ2dsZShcImZpbHRlcl9fc2VsZWN0LXBvcHVwX29wZW5cIiwgZmFsc2UpO1xuICAgICAgc2VsZWN0QnV0dG9uVGV4dC5pbm5lclRleHQgPSBlLnRhcmdldC5pbm5lclRleHQ7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudV9faWNvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudVwiKS5jbGFzc0xpc3QudG9nZ2xlKFwibWVudV9vcGVuXCIpO1xuICB9KTtcbn0pOyJdfQ==
